(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}})();const h="https://datausa.io/api/data?drilldowns=State&measures=Population",p="https://datausa.io/api/data?drilldowns=Nation&measures=Population",y=async a=>{try{const n=await fetch(p);if(!n.ok)throw new Error(`Failed to fetch info ${n.status}`);const t=await n.json(),r=[];return t.data.forEach(e=>{if(a===e.Year){const o={nation:e.Nation,year:e.Year,population:`${e.Population}`};r.push(o)}}),r}catch(n){return console.warn(n.message),null}},w=async(a,n)=>{try{const t=await fetch(h);if(!t.ok)throw new Error(`Failed to fetch info ${t.status}`);const r=await t.json(),e=[];return r.data.forEach(o=>{if(a===o.State&&n===o.Year){const l={state:o.State,year:o.Year,population:`${o.Population}`};e.push(l)}}),e}catch(t){return console.warn(t.message),null}},g=async()=>{try{const a=await fetch(p);if(!a.ok)throw new Error(`Failed to fetch info ${a.status}`);const n=await a.json(),t=[];return n.data.forEach(r=>{t.push(`${r.Year}`)}),t}catch(a){return console.warn(a.message),null}},E=(a,n)=>{const t=document.createElement("form");t.id="year-select-form",a.append(t);const r=document.createElement("label");r.textContent="Choose a Year: ",r.setAttribute("for","selectYear"),t.append(r);const e=document.createElement("select");r.setAttribute("name","selectYear"),e.id="selectYear",t.append(e);const o=document.createElement("option");o.textContent="----",o.value="default",o.selected=!0,e.append(o),n.forEach(l=>{const i=document.createElement("option");i.textContent=l,i.value=l,e.append(i)})},S=(a,n)=>{a.innerHTML="",n.forEach(t=>{const r=document.createElement("p");r.textContent=`Here is the population total for the ${t.nation} from ${t.year}: ${t.population}`,a.append(r)})},Y=(a,n)=>{a.innerHTML="",n.forEach(t=>{const r=document.createElement("p");r.textContent=`Here is the population total for ${t.state} from ${t.year}: ${t.population}`,a.append(r)})},b=()=>{const a=document.querySelector("#info-box"),n=document.querySelector("#details-box"),t=document.querySelector("#year-select");let r="";const e=document.querySelector("#nation-info-box");g().then(s=>E(t,s)).catch(s=>console.warn(s));const o=s=>{if(s.target.tagName=="path"){const c=s.target.dataset.name;n.innerHTML=c,n.style.opacity="100%"}else n.style.opacity="0%"};document.addEventListener("mouseover",o),window.onmousemove=s=>{let c=s.clientX,u=s.clientY;n.style.top=u+17+"px",n.style.left=c+"px";const{name:d,id:m}=s.target.dataset};const l=()=>{try{const c=document.querySelector("#selectYear").value;return r=c,c}catch{return console.warn(error.message),null}};document.addEventListener("change",l);const i=async()=>{try{const s=await y(r);return await S(e,s)}catch{return console.warn(error.message),null}};document.addEventListener("change",i);const f=async s=>{try{if(s.target.tagName=="path"){const c=s.target.dataset.name,u=await w(c,r);return await Y(a,u)}}catch(c){return console.warn(c.message),null}};document.addEventListener("click",f)};b();
